<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>proMUN — Single File App</title>
    <!-- Tailwind via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React + ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>
  <body class="bg-white text-gray-900 antialiased">
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useMemo } = React;
      const cn = (...c) => c.filter(Boolean).join(" ");
      const ROUTES = ["home","about","clubs","resources","events","join","support","thanks"];

      function useHashRoute() {
        const get = () => {
          const h = (window.location.hash || "#/").replace(/^#\/?/, "");
          const r = (h.split("/")[0] || "home");
          return ROUTES.includes(r) ? r : "home";
        };
        const [route, setRoute] = useState(get);
        useEffect(() => {
          const onHash = () => setRoute(get());
          window.addEventListener("hashchange", onHash);
          return () => window.removeEventListener("hashchange", onHash);
        }, []);
        const nav = (r) => { window.location.hash = "/" + r; setRoute(r); };
        return [route, nav];
      }

      const CLUBS = [];
      const EVENTS = [
        { title: "SJSMUN 2026 Conference", date: "December 2026", location: "Lisboa", blurb: "The official proMUN national conference for 2026.", href: "#" },
      ];

      const Container = ({children,className=""}) => <div className={cn("mx-auto max-w-7xl px-4 sm:px-6 lg:px-8", className)}>{children}</div>;
      const Card = ({children}) => <div className="rounded-xl border border-gray-200 p-6 bg-white shadow-sm">{children}</div>;
      const Button = ({children,onClick,href,variant="primary",type}) => {
        const cls = cn(
          "px-4 py-2 rounded-md text-sm font-medium",
          variant === "primary" && "bg-teal-600 text-white hover:bg-teal-700",
          variant === "outline" && "border border-gray-300 hover:bg-gray-50"
        );
        return href ? <a className={cls} href={href}>{children}</a> : <button className={cls} onClick={onClick} type={type}>{children}</button>;
      };
      const Logo = () => (
        <div className="flex items-center gap-2 select-none">
          <svg width="28" height="28" viewBox="0 0 256 256" aria-hidden>
            <defs>
              <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stopColor="#0A3D62" />
                <stop offset="50%" stopColor="#17BEBB" />
                <stop offset="100%" stopColor="#F6C343" />
              </linearGradient>
            </defs>
            <rect width="256" height="256" rx="32" fill="url(#g)" />
            <g fill="white">
              <circle cx="128" cy="100" r="36" opacity="0.95" />
              <path d="M64 176c16-28 40-44 64-44s48 16 64 44v16H64v-16z" />
            </g>
          </svg>
          <span className="font-bold text-lg">proMUN</span>
        </div>
      );

      function Navbar({route, onNav}) {
        const [open, setOpen] = useState(false);
        const links = useMemo(() => ([
          { to: "home", label: "Home" },
          { to: "about", label: "About" },
          { to: "clubs", label: "Clubs" },
          { to: "resources", label: "Resources" },
          { to: "events", label: "Events" },
          { to: "join", label: "Join" },
          { to: "support", label: "Support" },
        ]), []);

        useEffect(() => { setOpen(false); }, [route]);

        return (
          <header className="sticky top-0 z-50 bg-white/80 backdrop-blur border-b border-gray-200">
            <Container className="h-16 flex items-center justify-between">
              <a href="#/home" onClick={(e) => {e.preventDefault(); onNav("home");}} aria-label="Go to home">
                <Logo />
              </a>

              {/* Desktop nav */}
              <nav className="hidden md:flex items-center gap-1">
                {links.map(l => (
                  <a key={l.to} href={`#/${l.to}`} onClick={(e)=>{e.preventDefault(); onNav(l.to);}}
                     className={cn("px-3 py-2 rounded-md text-sm font-medium",
                       route===l.to ? "bg-teal-600/10 text-teal-700" : "text-gray-700 hover:bg-gray-100")}
                    >
                    {l.label}
                  </a>
                ))}
              </nav>

              {/* Mobile hamburger */}
              <button
                className="md:hidden inline-flex items-center justify-center rounded-md p-2 hover:bg-gray-100"
                aria-label="Open menu"
                aria-expanded={open}
                onClick={() => setOpen(o => !o)}
              >
                {open ? (
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"/>
                  </svg>
                ) : (
                  <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16M4 18h16"/>
                  </svg>
                )}
              </button>
            </Container>

            {/* Mobile menu panel */}
            <div
              className={cn(
                "md:hidden border-t border-gray-200 bg-white transition-all overflow-hidden",
                open ? "max-h-96" : "max-h-0"
              )}
            >
              <Container className="py-2">
                <nav className="flex flex-col py-2">
                  {links.map(l => (
                    <a
                      key={l.to}
                      href={`#/${l.to}`}
                      onClick={(e)=>{e.preventDefault(); onNav(l.to);}}
                      className={cn(
                        "px-3 py-2 rounded-md text-base",
                        route===l.to ? "bg-teal-600/10 text-teal-700" : "text-gray-700 hover:bg-gray-100"
                      )}
                    >
                      {l.label}
                    </a>
                  ))}
                </nav>
              </Container>
            </div>
          </header>
        );
      }

      const Footer = () => (
        <footer className="border-t border-gray-200">
          <Container className="py-10 text-sm text-gray-600 flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
            <p>© {new Date().getFullYear()} proMUN — Associação para o Desenvolvimento do Modelo ONU nas Escolas Portuguesas</p>
            <p className="opacity-80">Made with ❤️ for students and teachers.</p>
          </Container>
        </footer>
      );

      const Hero = ({ onStart }) => (
        <section className="relative overflow-hidden">
          <div className="absolute inset-0 -z-10 bg-gradient-to-br from-sky-900 via-teal-500 to-amber-400 opacity-20 blur-3xl"></div>
          <Container className="py-20 text-center">
            <h1 className="text-4xl sm:text-6xl font-extrabold">Bringing MUN to every public school in Portugal</h1>
            <p className="mt-6 text-lg text-gray-700 max-w-2xl mx-auto">
              proMUN trains teachers, supports student clubs, and hosts inspiring conferences—so more students discover diplomacy, debate, and global citizenship.
            </p>
            <div className="mt-8 flex justify-center gap-3">
              <Button onClick={onStart}>Start a Club</Button>
              <Button href="#/resources" variant="outline">Teacher Resources</Button>
            </div>
          </Container>
        </section>
      );

      const HomeSection = ({ onNav }) => (
        <>
          <Hero onStart={() => onNav("join")} />
          <Container className="py-16 grid md:grid-cols-3 gap-6">
            {[{ title: "Teacher Workshops", desc: "Training to launch and sustain MUN.", href: "#/resources" },
              { title: "Start a proMUN Club", desc: "Toolkit, mentorship, and branding.", href: "#/join" },
              { title: "Host a Conference", desc: "Guides and templates to run MUN.", href: "#/resources" }].map(c => (
              <Card key={c.title}>
                <h3 className="text-xl font-bold mb-2">{c.title}</h3>
                <p className="text-sm text-gray-600">{c.desc}</p>
                <div className="mt-4"><a href={c.href}>Explore →</a></div>
              </Card>
            ))}
          </Container>
        </>
      );

      const AboutSection = () => (
        <Container className="py-16 space-y-6 max-w-3xl">
          <h1 className="text-3xl">About proMUN</h1>
          <p>Our mission is to make Model United Nations accessible to every public school in Portugal.</p>
          <p>Why we do it: We’ve seen how MUN transforms classrooms into spaces of debate, empathy, and leadership.</p>
          <h2 className="text-2xl mt-8">Founders</h2>
          <div className="grid md:grid-cols-3 gap-6 mt-4">
            {[1,2,3].map(i => (
              <Card key={i}>
                <div className="h-32 bg-gray-100 mb-3 rounded"></div>
                <h3 className="font-semibold">Founder {i}</h3>
                <p className="text-sm text-gray-600">Role / short bio</p>
              </Card>
            ))}
          </div>
        </Container>
      );

      const ClubsSection = () => (
        <Container className="py-16">
          <div className="flex items-end justify-between mb-8">
            <div>
              <h1 className="text-3xl">proMUN Clubs</h1>
              <p className="text-gray-600">Affiliated clubs across Portugal. Want to start one? Apply and we’ll help you launch in weeks.</p>
            </div>
            <a href="#/join" className="px-4 py-2 rounded-md bg-teal-600 text-white h-fit">Start a Club</a>
          </div>
          {CLUBS.length === 0 && <p>No clubs yet. Be the first!</p>}
        </Container>
      );

      const ResourcesSection = () => (
        <Container className="py-16 max-w-4xl">
          <h1 className="text-3xl mb-4">Resources</h1>
          <ul className="list-disc pl-6">
            <li>Club Constitution template</li>
            <li>Chairing & Rules guides</li>
            <li>Conference-in-a-Box</li>
          </ul>
        </Container>
      );

      const EventsSection = () => (
        <Container className="py-16">
          <h1 className="text-3xl mb-6">Events & Conferences</h1>
        {EVENTS.map(e => (
            <Card key={e.title}>
              <h3 className="text-lg font-semibold">{e.title}</h3>
              <p className="text-sm text-gray-600">{e.date} • {e.location}</p>
              <p className="text-sm mt-1">{e.blurb}</p>
            </Card>
          ))}
        </Container>
      );

      // ✅ Real Formspree-backed form with redirect + honeypot
      const JoinSection = () => (
        <Container className="py-16 max-w-3xl">
          <h1 className="text-3xl mb-4">Start or Affiliate a proMUN Club</h1>
          <p className="text-gray-600 mb-6">
            Fill this in and we’ll get back to you via email. This form is powered by Formspree.
          </p>

          <form
            action="https://formspree.io/f/xldlagkr"
            method="POST"
            className="grid gap-4"
          >
            {/* Fields sent to your email */}
            <input name="school" placeholder="School name" className="border p-2 rounded" required />
            <input name="city" placeholder="City" className="border p-2 rounded" required />
            <input name="liaison" placeholder="Club liaison (name)" className="border p-2 rounded" required />
            <input type="email" name="email" placeholder="Email" className="border p-2 rounded" required />
            <textarea name="message" placeholder="Message" className="border p-2 rounded" rows="5" required></textarea>

            {/* Optional: GDPR-style consent */}
            <label className="flex items-start gap-2 text-sm text-gray-600">
              <input type="checkbox" required className="mt-1" />
              <span>I consent to proMUN contacting me regarding this request.</span>
            </label>

            {/* Hidden helpers */}
            <input type="hidden" name="_subject" value="New proMUN club contact" />
            <!-- After success, go to the built-in Thanks page -->
            <input type="hidden" name="_redirect" value="#/thanks" />
            <!-- Honeypot (bots will fill; humans won't) -->
            <input type="text" name="_gotcha" className="hidden" tabIndex="-1" autoComplete="off" />

            <Button type="submit">Send</Button>
          </form>

          <p className="text-xs text-gray-500 mt-3">
            Having issues? Email us or DM on Instagram (@promun) and we’ll help.
          </p>
        </Container>
      );

      const SupportSection = () => (
        <Container className="py-16 max-w-3xl">
          <h1 className="text-3xl mb-4">Support proMUN</h1>
          <p>Your donation enables free resources for public schools.</p>
        </Container>
      );

      // Simple Thank You page for Formspree redirect
      const ThanksSection = () => (
        <Container className="py-24 text-center max-w-2xl">
          <h1 className="text-4xl font-extrabold">Thank you! 🎉</h1>
          <p className="mt-4 text-gray-700">
            We’ve received your message and will reply as soon as possible.
          </p>
          <div className="mt-8">
            <Button href="#/home" variant="outline">Back to Home</Button>
          </div>
        </Container>
      );

      function App() {
        const [route, nav] = useHashRoute();
        useEffect(() => { if (!window.location.hash) nav("home"); }, []);
        return (
          <div className="min-h-screen flex flex-col">
            <Navbar route={route} onNav={nav} />
            <main className="flex-1">
              {route === "home" && <HomeSection onNav={nav} />}
              {route === "about" && <AboutSection />}
              {route === "clubs" && <ClubsSection />}
              {route === "resources" && <ResourcesSection />}
              {route === "events" && <EventsSection />}
              {route === "join" && <JoinSection />}
              {route === "support" && <SupportSection />}
              {route === "thanks" && <ThanksSection />}
            </main>
            <Footer />
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
  </body>
</html>
